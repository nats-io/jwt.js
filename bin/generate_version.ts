import npmConfig from "../package.json" with { type: "json" };
import jsrConfig from "../deno.json" with { type: "json" };

if (npmConfig.version !== jsrConfig.version) {
  throw new Error(
    `unmatched versions - npm: ${npmConfig.version}  jsr: ${jsrConfig.version}`,
  );
}

const v = npmConfig.version;

Deno.writeTextFileSync(
  "./src/version.ts",
  `
// this file is autogenerated - do not edit
export const Version = "${v}";`,
  { create: true },
);
